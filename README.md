# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

Классы:
-ApiModel
Расширяет функциональность базового класса Api, предоставляя методы для взаимодействия с API, связанным с продуктами и заказами. Он реализует интерфейс IApi и использует базовый URL для API и URL для доставки контента.

Конструктор:

contentDeliveryUrl — базовый URL для доставки контента, такого как изображения.

apiBaseUrl — базовый URL для API.

options — необязательные параметры запроса, которые могут быть переданы в конструктор базового класса Api.

Методы класса ApiModel:

fetchProductList(): Promise<IItem[]> — выполняет запрос к API для получения списка продуктов. Возвращает промис, который разрешается в массив продуктов. Каждый продукт дополняется URL изображения, используя contentDeliveryUrl.

submitOrder(order: IOrderBatch): Promise — отправляет заказ на сервер. Возвращает промис, который разрешается в подтверждение заказа.
Свойства класса ApiModel:

contentDeliveryUrl: Хранит базовый URL для доставки контента.

productList: Список продуктов, полученных из API.


-BasketModel

Реализует интерфейс IBasket и предоставляет функциональность для управления корзиной покупок. Он позволяет добавлять, удалять и очищать товары в корзине, а также получать общее количество товаров и их общую стоимость.

Свойства класса BasketModel:

productsInCart: Массив, содержащий товары, добавленные в корзину.

Методы класса BasketModel:

set productsInBasket(products: IItem[]): void — устанавливает список товаров в корзине.

get productsInBasket(): IItem[] — возвращает список товаров в корзине.

getProductCount(): number — возвращает количество товаров в корзине.

getTotalPrice(): number — возвращает общую стоимость всех товаров в корзине. Использует метод reduce для суммирования цен всех товаров.

addProductToBasket(product: IItem): void — добавляет товар в корзину.

removeProductFromBasket(product: IItem): void — удаляет товар из корзины, если он присутствует.

clearBasket(): void — очищает корзину, удаляя все товары

-DataModel
Реализует интерфейс IData и предоставляет функциональность для управления списком продуктов и предварительным просмотром выбранного продукта. Он использует менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

eventManager — менеджер событий, используемый для управления взаимодействием с пользователем.
Свойства класса:

products - Массив, содержащий список продуктов.

selectedProduct - Выбранный продукт для предварительного просмотра.

Методы класса:
set productList(products: IItem[]): void — устанавливает список продуктов и инициирует событие products:updated, уведомляя о том, что список продуктов был обновлен.

get productList(): IItem[] — возвращает текущий список продуктов.

previewProduct(product: IItem): void — устанавливает выбранный продукт и инициирует событие modalCard:open, передавая выбранный продукт для предварительного просмотра.


FormModel

Реализует интерфейс IFormModel и предоставляет функциональность для управления данными формы заказа, включая валидацию адреса и контактной информации. Он использует менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.
Свойства класса:

paymentMethod: Способ оплаты.

email: Электронная почта.

phone: Номер телефона.

address: Адрес доставки.

formErrors: Объект для хранения ошибок валидации формы.

Методы класса FormModel:

setAddress(field: string, value: string): void — устанавливает адрес доставки. Если адрес проходит валидацию, инициирует событие order:ready, передавая данные заказа.

validateAddress(): boolean — валидирует адрес доставки. Проверяет, что адрес не пустой, соответствует регулярному выражению и выбран способ оплаты. Возвращает true, если ошибок нет.

setContactInfo(field: string, value: string): void — устанавливает контактную информацию (email или телефон). Если данные проходят валидацию, инициирует событие order:ready, передавая данные заказа.

validateContactInfo(): boolean — валидирует контактную информацию. Проверяет, что email и телефон не пустые и соответствуют регулярным выражениям. Возвращает true, если ошибок нет.

getOrderData(): object — возвращает объект с данными заказа, включая способ оплаты, контактную информацию, адрес, общую стоимость и список товаров.

-BasketInterface

Представляет собой пользовательский интерфейс для корзины покупок в веб-приложении. Он реализует интерфейс IBasket и использует менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

template: HTMLTemplateElement — шаблон HTML, из которого создаются элементы интерфейса корзины.

eventManager: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса BasketInterface:

basketElement: Основной элемент корзины, содержащий все остальные элементы.

titleElement: Элемент заголовка корзины.

productListElement: Элемент, содержащий список товаров в корзине.

checkoutButton: Кнопка для оформления заказа.

totalPriceElement: Элемент, отображающий общую стоимость товаров в корзине.

headerBasketButton: Кнопка корзины в заголовке страницы.

headerBasketCounter: Элемент, отображающий количество товаров в корзине в заголовке.

Методы класса BasketInterface:

set basketItems(items: HTMLElement[]): void — устанавливает элементы товаров в корзине. Если товаров нет, отображается сообщение "Корзина пуста", и кнопка оформления заказа отключается.

updateHeaderCartCounter(count: number): void — обновляет счетчик товаров в корзине в заголовке страницы.

updateTotalPrice(total: number): void — обновляет отображение общей стоимости товаров в корзине.

render(): HTMLElement — возвращает основной элемент корзины с заголовком "Корзина".

-BasketItemInterface
Представляет собой интерфейс для отображения элемента в корзине покупок. Он реализует интерфейс IBasketItem и использует шаблон HTML для создания структуры элемента, а также менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

template: HTMLTemplateElement — шаблон HTML, из которого создаются элементы интерфейса элемента корзины.

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

actions?: IClickAction — необязательный параметр, который может содержать обработчик кликов для кнопки удаления.

Свойства класса:

Свойства класса BasketItemInterface:

basketItem: Основной элемент, представляющий товар в корзине.

basketItemIndex: Элемент, отображающий индекс товара в корзине.

basketItemTitle: Элемент, отображающий название товара.

basketItemPrice: Элемент, отображающий цену товара.

buttonDelete: Кнопка для удаления товара из корзины.

Методы класса BasketItemInterface:

setPrice(value: number | null): string — защищенный метод, который форматирует цену товара. Если цена равна null, возвращает строку "Бесценно".

render(data: IItem, item: number): HTMLElement — метод, который заполняет элемент данными о товаре и возвращает его. Устанавливает индекс, название и цену товара.

-CardInterface

Представляет собой интерфейс для отображения карточки товара или элемента. Он реализует интерфейс ICard и использует шаблон HTML для создания структуры карточки, а также менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

template: HTMLTemplateElement — шаблон HTML, из которого создаются элементы интерфейса карточки.

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

actions?: IClickAction — необязательный параметр, который может содержать обработчик кликов для всей карточки.

Свойства класса CardInterface:

cardElement: Основной элемент, представляющий карточку.

categoryElement: Элемент, отображающий категорию карточки.

titleElement: Элемент, отображающий название карточки.

imageElement: Элемент изображения карточки.

priceElement: Элемент, отображающий цену карточки.

categoryColors: Объект, сопоставляющий категории с CSS-классами для стилизации.

Методы класса CardInterface:

setElementText(element: HTMLElement, value: unknown): void — защищенный метод, который устанавливает текстовое содержимое элемента, если элемент существует.

set category(value: string): void — устанавливает категорию карточки, обновляя текст и класс элемента категории для стилизации.

formatPrice(value: number | null): string — защищенный метод, который форматирует цену. Если цена равна null, возвращает строку "Бесценно".

render(Data: IItem): HTMLElement — метод, который заполняет элементы карточки данными и возвращает её. Устанавливает категорию, название, изображение и цену.

-CardPreviewInterface

Расширяет функциональность класса CardInterface, добавляя возможность предварительного просмотра карточки с дополнительной информацией и кнопкой для добавления в корзину. Он реализует интерфейс ICard и использует менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

template: HTMLTemplateElement — шаблон HTML, из которого создаются элементы интерфейса карточки.

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

actions?: IClickAction — необязательный параметр, который может содержать обработчик кликов для всей карточки.

Свойства класса CardPreviewInterface:

text: Элемент, отображающий описание карточки.

button: Кнопка для добавления карточки в корзину.

Методы класса CardPreviewInterface:

checkAvailability(data: IItem): string — метод, который проверяет доступность товара. Если цена указана, возвращает текст "Купить". Если цена не указана, отключает кнопку и возвращает текст "Не продается".

render(data: IItem): HTMLElement — метод, который заполняет элементы карточки данными и возвращает её. Устанавливает категорию, название, изображение, цену, описание и текст кнопки.
-FormContactsInterface

Представляет собой интерфейс для формы обратной связи, реализующий интерфейс IFormContacts. Он использует шаблон HTML для создания структуры формы и менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

template: HTMLTemplateElement — шаблон HTML, из которого создаются элементы интерфейса формы.

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса FormContactsInterface:

formContacts: Основной элемент формы.

inputAll: Массив всех элементов ввода в форме.

buttonSubmit: Кнопка отправки формы.

formErrors: Элемент для отображения ошибок формы.

Методы класса FormContactsInterface:

set valid(value: boolean): void — устанавливает состояние кнопки отправки формы. Если значение false, кнопка отключается.

render(): HTMLElement — возвращает основной элемент формы.

-FormInterface

Представляет собой интерфейс для формы заказа, реализующий интерфейс IForm. Он использует шаблон HTML для создания структуры формы и менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

template: HTMLTemplateElement — шаблон HTML, из которого создаются элементы интерфейса формы.

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса FormInterface:

orderForm: Основной элемент формы.

paymentButtons: Массив кнопок, представляющих доступные методы оплаты.

submitButton: Кнопка отправки формы.

errorContainer: Элемент для отображения ошибок формы.

Методы класса FormInterface:

set selectedPaymentMethod(paymentMethod: string): void — устанавливает выбранный метод оплаты, добавляя класс активного состояния к соответствующей кнопке.

set valid(value: boolean): void — устанавливает состояние кнопки отправки формы. Если значение false, кнопка отключается.

render(): HTMLElement — возвращает основной элемент формы.

-ModalInterface

Представляет собой интерфейс для модального окна, реализующий интерфейс IModal. Он управляет отображением и взаимодействием с модальным окном, используя менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

modalContainer: HTMLElement — контейнер модального окна, содержащий его структуру.

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса ModalInterface:

modalElement: Основной элемент модального окна.

closeButton: Кнопка для закрытия модального окна.

modalContent: Элемент, содержащий контент модального окна.

pageWrapper: Элемент, который может быть заблокирован при открытии модального окна.

Методы класса ModalInterface:

set content(value: HTMLElement): void — устанавливает содержимое модального окна, заменяя текущие дочерние элементы.

open(): void — открывает модальное окно, добавляя класс активного состояния и инициируя событие modal:open.

close(): void — закрывает модальное окно, удаляя класс активного состояния, очищая содержимое и инициируя событие modal:close.

set isLocked(value: boolean): void — блокирует или разблокирует страницу, добавляя или удаляя класс блокировки у элемента pageWrapper.

render(): HTMLElement — открывает модальное окно и возвращает его основной элемент.
-SuccessInterface

Представляет собой интерфейс для отображения сообщения об успешном выполнении операции, например, после успешного оформления заказа. Он использует шаблон HTML для создания структуры сообщения и менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:

template: HTMLTemplateElement — шаблон HTML, из которого создаются элементы интерфейса сообщения.

events: IEvents — менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса SuccessInterface:

success: Основной элемент сообщения об успехе.

description: Элемент, отображающий описание или сообщение об успешной операции.

button: Кнопка для закрытия сообщения.

Методы класса SuccessInterface:

render(total: number): HTMLElement — метод, который заполняет элемент сообщения данными и возвращает его. Устанавливает текст описания, указывая количество списанных синапсов.

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды


npm install
npm run start


или


yarn
yarn start

## Сборка


npm run build


или


yarn build
