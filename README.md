# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

Классы:
ApiModel
Расширяет функциональность базового класса Api, предоставляя методы для взаимодействия с API, связанным с продуктами и заказами. Он реализует интерфейс IApi и использует базовый URL для API и URL для доставки контента.

Конструктор:
contentDeliveryUrl: string — Базовый URL для доставки контента, такого как изображения.

apiBaseUrl: string — Базовый URL для API.

options?: RequestInit — Необязательные параметры запроса, которые могут быть переданы в конструктор базового класса Api.

Свойства класса:
contentDeliveryUrl: string — Хранит базовый URL для доставки контента.

productList: IItem[] — Список продуктов, полученных из API.

Методы класса:
fetchProductList(): Promise<IItem[]> — Выполняет запрос к API для получения списка продуктов. Возвращает промис, который разрешается в массив продуктов. Каждый продукт дополняется URL изображения, используя contentDeliveryUrl.

submitOrder(order: IOrderBatch): Promise<IOrderConfirmation> — Отправляет заказ на сервер. Возвращает промис, который разрешается в подтверждение заказа.

BasketModel
Реализует интерфейс IBasket и предоставляет функциональность для управления корзиной покупок. Он позволяет добавлять, удалять и очищать товары в корзине, а также получать общее количество товаров и их общую стоимость.

Свойства класса:
productsInCart: IItem[] — Массив, содержащий товары, добавленные в корзину.

Методы класса:
set productsInBasket(products: IItem[]): void — Устанавливает список товаров в корзине.

get productsInBasket(): IItem[] — Возвращает список товаров в корзине.

getProductCount(): number — Возвращает количество товаров в корзине.

getTotalPrice(): number — Возвращает общую стоимость всех товаров в корзине. Использует метод reduce для суммирования цен всех товаров.

addProductToBasket(product: IItem): void — Добавляет товар в корзину.

removeProductFromBasket(product: IItem): void — Удаляет товар из корзины, если он присутствует.

clearBasket(): void — Очищает корзину, удаляя все товары.

DataModel
Реализует интерфейс IData и предоставляет функциональность для управления списком продуктов и предварительным просмотром выбранного продукта. Он использует менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
eventManager: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса:
products: IItem[] — Массив, содержащий список продуктов.

selectedProduct: IItem — Выбранный продукт для предварительного просмотра.

Методы класса:
set productList(products: IItem[]): void — Устанавливает список продуктов и инициирует событие products:updated, уведомляя о том, что список продуктов был обновлен.

get productList(): IItem[] — Возвращает текущий список продуктов.

previewProduct(product: IItem): void — Устанавливает выбранный продукт и инициирует событие modalCard:open, передавая выбранный продукт для предварительного просмотра.

BasketInterface
Представляет собой пользовательский интерфейс для корзины покупок в веб-приложении. Он реализует интерфейс IBasket и использует менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
template: HTMLTemplateElement — Шаблон HTML, из которого создаются элементы интерфейса корзины.

eventManager: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса:
basketElement: HTMLElement — Основной элемент корзины, содержащий все остальные элементы.

titleElement: HTMLElement — Элемент заголовка корзины.

productListElement: HTMLElement — Элемент, содержащий список товаров в корзине.

checkoutButton: HTMLButtonElement — Кнопка для оформления заказа.

totalPriceElement: HTMLElement — Элемент, отображающий общую стоимость товаров в корзине.

headerBasketButton: HTMLButtonElement — Кнопка корзины в заголовке страницы.

headerBasketCounter: HTMLElement — Элемент, отображающий количество товаров в корзине в заголовке.

Методы класса:
set basketItems(items: HTMLElement[]): void — Устанавливает элементы товаров в корзине. Если товаров нет, отображается сообщение "Корзина пуста", и кнопка оформления заказа отключается.

updateHeaderCartCounter(count: number): void — Обновляет счетчик товаров в корзине в заголовке страницы.

updateTotalPrice(total: number): void — Обновляет отображение общей стоимости товаров в корзине.

render(): HTMLElement — Возвращает основной элемент корзины с заголовком "Корзина".

BasketItemInterface
Представляет собой интерфейс для отображения элемента в корзине покупок. Он реализует интерфейс IBasketItem и использует шаблон HTML для создания структуры элемента, а также менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
template: HTMLTemplateElement — Шаблон HTML, из которого создаются элементы интерфейса элемента корзины.

events: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

actions?: IClickAction — Необязательный параметр, который может содержать обработчик кликов для кнопки удаления.

Свойства класса:
basketItem: HTMLElement — Основной элемент, представляющий товар в корзине.

basketItemIndex: HTMLElement — Элемент, отображающий индекс товара в корзине.

basketItemTitle: HTMLElement — Элемент, отображающий название товара.

basketItemPrice: HTMLElement — Элемент, отображающий цену товара.

buttonDelete: HTMLButtonElement — Кнопка для удаления товара из корзины.

Методы класса:
setPrice(value: number | null): string — Защищенный метод, который форматирует цену товара. Если цена равна null, возвращает строку "Бесценно".

render(data: IItem, item: number): HTMLElement — Метод, который заполняет элемент данными о товаре и возвращает его. Устанавливает индекс, название и цену товара.

CardInterface
Представляет собой интерфейс для отображения карточки товара или элемента. Он реализует интерфейс ICard и использует шаблон HTML для создания структуры карточки, а также менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
template: HTMLTemplateElement — Шаблон HTML, из которого создаются элементы интерфейса карточки.

events: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

actions?: IClickAction — Необязательный параметр, который может содержать обработчик кликов для всей карточки.

Свойства класса:
cardElement: HTMLElement — Основной элемент, представляющий карточку.

categoryElement: HTMLElement — Элемент, отображающий категорию карточки.

titleElement: HTMLElement — Элемент, отображающий название карточки.

imageElement: HTMLImageElement — Элемент изображения карточки.

priceElement: HTMLElement — Элемент, отображающий цену карточки.

categoryColors: Record<string, string> — Объект, сопоставляющий категории с CSS-классами для стилизации.

Методы класса:
setElementText(element: HTMLElement, value: unknown): void — Защищенный метод, который устанавливает текстовое содержимое элемента, если элемент существует.

set category(value: string): void — Устанавливает категорию карточки, обновляя текст и класс элемента категории для стилизации.

formatPrice(value: number | null): string — Защищенный метод, который форматирует цену. Если цена равна null, возвращает строку "Бесценно".

render(Data: IItem): HTMLElement — Метод, который заполняет элементы карточки данными и возвращает её. Устанавливает категорию, название, изображение и цену.

CardPreviewInterface
Расширяет функциональность класса CardInterface, добавляя возможность предварительного просмотра карточки с дополнительной информацией и кнопкой для добавления в корзину. Он реализует интерфейс ICard и использует менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
template: HTMLTemplateElement — Шаблон HTML, из которого создаются элементы интерфейса карточки.

events: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

actions?: IClickAction — Необязательный параметр, который может содержать обработчик кликов для всей карточки.

Свойства класса:
text: HTMLElement — Элемент, отображающий описание карточки.

button: HTMLButtonElement — Кнопка для добавления карточки в корзину.

Методы класса:
checkAvailability(data: IItem): string — Метод, который проверяет доступность товара. Если цена указана, возвращает текст "Купить". Если цена не указана, отключает кнопку и возвращает текст "Не продается".

render(data: IItem): HTMLElement — Метод, который заполняет элементы карточки данными и возвращает её. Устанавливает категорию, название, изображение, цену, описание и текст кнопки.

FormContactsInterface
Представляет собой интерфейс для формы обратной связи, реализующий интерфейс IFormContacts. Он использует шаблон HTML для создания структуры формы и менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
template: HTMLTemplateElement — Шаблон HTML, из которого создаются элементы интерфейса формы.

events: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса:
formContacts: HTMLFormElement — Основной элемент формы.

inputAll: HTMLInputElement[] — Массив всех элементов ввода в форме.

buttonSubmit: HTMLButtonElement — Кнопка отправки формы.

formErrors: HTMLElement — Элемент для отображения ошибок формы.

Методы класса:
set valid(value: boolean): void — Устанавливает состояние кнопки отправки формы. Если значение false, кнопка отключается.

render(): HTMLElement — Возвращает основной элемент формы.

FormInterface
Представляет собой интерфейс для формы заказа, реализующий интерфейс IForm. Он использует шаблон HTML для создания структуры формы и менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
template: HTMLTemplateElement — Шаблон HTML, из которого создаются элементы интерфейса формы.

events: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса:
orderForm: HTMLFormElement — Основной элемент формы.

paymentButtons: HTMLButtonElement[] — Массив кнопок, представляющих доступные методы оплаты.

submitButton: HTMLButtonElement — Кнопка отправки формы.

errorContainer: HTMLElement — Элемент для отображения ошибок формы.

Методы класса:
set selectedPaymentMethod(paymentMethod: string): void — Устанавливает выбранный метод оплаты, добавляя класс активного состояния к соответствующей кнопке.

set valid(value: boolean): void — Устанавливает состояние кнопки отправки формы. Если значение false, кнопка отключается.

render(): HTMLElement — Возвращает основной элемент формы.

ModalInterface
Представляет собой интерфейс для модального окна, реализующий интерфейс IModal. Он управляет отображением и взаимодействием с модальным окном, используя менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
modalContainer: HTMLElement — Контейнер модального окна, содержащий его структуру.

events: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса:
modalElement: HTMLElement — Основной элемент модального окна.

closeButton: HTMLButtonElement — Кнопка для закрытия модального окна.

modalContent: HTMLElement — Элемент, содержащий контент модального окна.

pageWrapper: HTMLElement — Элемент, который может быть заблокирован при открытии модального окна.

Методы класса:
set content(value: HTMLElement): void — Устанавливает содержимое модального окна, заменяя текущие дочерние элементы.

open(): void — Открывает модальное окно, добавляя класс активного состояния и инициируя событие modal:open.

close(): void — Закрывает модальное окно, удаляя класс активного состояния, очищая содержимое и инициируя событие modal:close.

set isLocked(value: boolean): void — Блокирует или разблокирует страницу, добавляя или удаляя класс блокировки у элемента pageWrapper.

render(): HTMLElement — Открывает модальное окно и возвращает его основной элемент.

SuccessInterface
Представляет собой интерфейс для отображения сообщения об успешном выполнении операции, например, после успешного оформления заказа. Он использует шаблон HTML для создания структуры сообщения и менеджер событий IEvents для управления взаимодействием с пользователем.

Конструктор:
template: HTMLTemplateElement — Шаблон HTML, из которого создаются элементы интерфейса сообщения.

events: IEvents — Менеджер событий, используемый для управления взаимодействием с пользователем.

Свойства класса:
success: HTMLElement — Основной элемент сообщения об успехе.

description: HTMLElement — Элемент, отображающий описание или сообщение об успешной операции.

button: HTMLButtonElement — Кнопка для закрытия сообщения.

Методы класса:
render(total: number): HTMLElement — Метод, который заполняет элемент сообщения данными и возвращает его. Устанавливает текст описания, указывая количество списанных синапсов.
## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды


npm install
npm run start


или


yarn
yarn start

## Сборка


npm run build


или


yarn build
